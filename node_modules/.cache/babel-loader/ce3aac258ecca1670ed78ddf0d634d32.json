{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\yangwei\\\\Desktop\\\\my-app\\\\my-app\\\\my-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\yangwei\\\\Desktop\\\\my-app\\\\my-app\\\\my-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\yangwei\\\\Desktop\\\\my-app\\\\my-app\\\\my-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\yangwei\\\\Desktop\\\\my-app\\\\my-app\\\\my-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\yangwei\\\\Desktop\\\\my-app\\\\my-app\\\\my-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\yangwei\\\\Desktop\\\\my-app\\\\my-app\\\\my-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Tag,Input,Icon}from'antd';import{TweenOneGroup}from'rc-tween-one';var NewTag=/*#__PURE__*/function(_Component){_inherits(NewTag,_Component);function NewTag(props){var _this;_classCallCheck(this,NewTag);_this=_possibleConstructorReturn(this,_getPrototypeOf(NewTag).call(this,props));_this.handleClose=function(removedTag){var tags=_this.state.tags.filter(function(tag){return tag!==removedTag;});console.log(tags);_this.setState({tags:tags});};_this.showInput=function(){_this.setState({inputVisible:true},function(){return _this.input.focus();});};_this.handleInputChange=function(e){_this.setState({inputValue:e.target.value});};_this.handleInputConfirm=function(){var inputValue=_this.state.inputValue;var tags=_this.state.tags;if(inputValue&&tags.indexOf(inputValue)===-1){tags=[].concat(_toConsumableArray(tags),[inputValue]);}console.log(tags);_this.props.pfn(tags);_this.setState({tags:tags,inputVisible:false,inputValue:''});};_this.saveInputRef=function(input){return _this.input=input;};_this.forMap=function(tag){var tagElem=React.createElement(Tag,{closable:true,onClose:function onClose(e){e.preventDefault();_this.handleClose(tag);},color:\"red\"},tag);return React.createElement(\"span\",{key:tag,style:{display:'inline-block'}},tagElem);};_this.state={tags:[],inputVisible:false,inputValue:''};return _this;}_createClass(NewTag,[{key:\"render\",value:function render(){var _this$state=this.state,tags=_this$state.tags,inputVisible=_this$state.inputVisible,inputValue=_this$state.inputValue;var tagChild=tags.map(this.forMap);return React.createElement(\"div\",null,React.createElement(\"div\",{style:{marginBottom:16}},React.createElement(TweenOneGroup,{enter:{scale:0.8,opacity:0,type:'from',duration:100,onComplete:function onComplete(e){e.target.style='';}},leave:{opacity:0,width:0,scale:0,duration:200},appear:false},tagChild)),inputVisible&&React.createElement(Input,{ref:this.saveInputRef,type:\"text\",size:\"small\",style:{width:78},value:inputValue,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!inputVisible&&React.createElement(Tag,{onClick:this.showInput,style:{background:'#fff',borderStyle:'dashed'},color:\"red\"},React.createElement(Icon,{type:\"plus\"}),\" \\u6807\\u7B7E\"));}}]);return NewTag;}(Component);export default NewTag;","map":{"version":3,"sources":["C:/Users/yangwei/Desktop/my-app/my-app/my-demo/src/component/NewContent/list/NewTag.js"],"names":["React","Component","Tag","Input","Icon","TweenOneGroup","NewTag","props","handleClose","removedTag","tags","state","filter","tag","console","log","setState","showInput","inputVisible","input","focus","handleInputChange","e","inputValue","target","value","handleInputConfirm","indexOf","pfn","saveInputRef","forMap","tagElem","preventDefault","display","tagChild","map","marginBottom","scale","opacity","type","duration","onComplete","style","width","background","borderStyle"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Tag, Input, Icon } from 'antd';\r\nimport { TweenOneGroup } from 'rc-tween-one';\r\n\r\nclass NewTag extends Component {\r\n   constructor(props){\r\n        super(props);\r\n   this.state = {\r\n    tags: [],\r\n    inputVisible: false,\r\n    inputValue: '',\r\n  }\r\n   };\r\n\r\n  handleClose = removedTag => {\r\n    const tags = this.state.tags.filter(tag => tag !== removedTag);\r\n    console.log(tags);\r\n    this.setState({ tags });\r\n  };\r\n\r\n  showInput = () => {\r\n    this.setState({ inputVisible: true }, () => this.input.focus());\r\n  };\r\n\r\n  handleInputChange = e => {\r\n    this.setState({ inputValue: e.target.value });\r\n  };\r\n\r\n  handleInputConfirm = () => {\r\n    const { inputValue } = this.state;\r\n    let { tags } = this.state;\r\n    if (inputValue && tags.indexOf(inputValue) === -1) {\r\n      tags = [...tags, inputValue];\r\n    }\r\n    console.log(tags);\r\n    this.props.pfn(tags)\r\n    this.setState({\r\n      tags,\r\n      inputVisible: false,\r\n      inputValue: '',\r\n    });\r\n  };\r\n\r\n  saveInputRef = input => (this.input = input);\r\n\r\n  forMap = tag => {\r\n    const tagElem = (\r\n      <Tag\r\n        closable\r\n        onClose={e => {\r\n          e.preventDefault();\r\n          this.handleClose(tag);\r\n        }}\r\n        color=\"red\"\r\n      >\r\n        {tag}\r\n      </Tag>\r\n    );\r\n    return (\r\n      <span key={tag} style={{ display: 'inline-block' }}>\r\n        {tagElem}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { tags, inputVisible, inputValue } = this.state;\r\n    const tagChild = tags.map(this.forMap);\r\n    return (\r\n      <div>\r\n        <div style={{ marginBottom: 16 }}>\r\n          <TweenOneGroup\r\n            enter={{\r\n              scale: 0.8,\r\n              opacity: 0,\r\n              type: 'from',\r\n              duration: 100,\r\n              onComplete: e => {\r\n                e.target.style = '';\r\n              },\r\n            }}\r\n            leave={{ opacity: 0, width: 0, scale: 0, duration: 200 }}\r\n            appear={false}\r\n          >\r\n            {tagChild}\r\n          </TweenOneGroup>\r\n        </div>\r\n        {inputVisible && (\r\n          <Input\r\n            ref={this.saveInputRef}\r\n            type=\"text\"\r\n            size=\"small\"\r\n            style={{ width: 78 }}\r\n            value={inputValue}\r\n            onChange={this.handleInputChange}\r\n            onBlur={this.handleInputConfirm}\r\n            onPressEnter={this.handleInputConfirm}\r\n          />\r\n        )}\r\n        {!inputVisible && (\r\n          <Tag onClick={this.showInput} style={{ background: '#fff', borderStyle: 'dashed' }}\r\n          color=\"red\"\r\n          >\r\n            <Icon type=\"plus\" /> 标签\r\n          </Tag>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default NewTag;"]},"metadata":{},"sourceType":"module"}